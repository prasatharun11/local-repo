import org.apache.cxf.interceptor.Fault;
import org.apache.cxf.message.Message;
import org.apache.cxf.phase.AbstractPhaseInterceptor;
import org.apache.cxf.phase.Phase;

public class RetryFaultInterceptor extends AbstractPhaseInterceptor<Message> {
    
    public RetryFaultInterceptor() {
        super(Phase.PREPARE_SEND_ENDING);
    }
    
    @Override
    public void handleMessage(Message message) throws Fault {
        // Check if this is a retry
        Integer retryCount = (Integer) message.getContextualProperty("retry.count");
        if (retryCount != null && retryCount > 0) {
            System.out.println("Retry successful on attempt: " + retryCount);
        }
    }
}